# JavaBlocks Engine - Custom Model Training Configuration
# Configure your training parameters here

# Dataset Configuration
dataset:
  # Path to training images (relative to training/data/)
  data_directory: "data"
  
  # Image extensions to process
  extensions:
    - ".jpg"
    - ".jpeg"
    - ".png"
    - ".bmp"
    - ".webp"
  
  # Validation split ratio (0.1 = 10% for validation)
  validation_split: 0.2
  
  # Minimum images per class required for training
  min_samples_per_class: 5
  
  # Shuffle training data
  shuffle: true

# Preprocessing Configuration
preprocessing:
  # Target image size for model input
  target_size: [224, 224]
  
  # Whether to normalize images
  normalize: true
  
  # Normalization mean (ImageNet defaults)
  mean: [0.485, 0.456, 0.406]
  std: [0.229, 0.224, 0.225]
  
  # Data augmentation settings
  augmentation:
    enabled: true
    rotation_range: 20
    width_shift_range: 0.2
    height_shift_range: 0.2
    horizontal_flip: true
    vertical_flip: false
    zoom_range: 0.2
    brightness_range: [0.8, 1.2]

# Model Configuration
model:
  # Model architecture to use
  # Options: resnet50, efficientnet_b0, mobilenet_v3, vgg16, custom
  architecture: "resnet50"
  
  # Whether to use pretrained weights
  pretrained: true
  
  # Number of classes (auto-detected if not specified)
  num_classes: null
  
  # Dropout rate for regularization
  dropout: 0.5
  
  # Freeze pretrained layers
  freeze_backbone: false

# Training Configuration
training:
  # Number of training epochs
  epochs: 100
  
  # Batch size
  batch_size: 32
  
  # Optimizer settings
  optimizer:
    type: "adam"  # Options: adam, sgd, rmsprop
    learning_rate: 0.001
    weight_decay: 0.0001
  
  # Learning rate scheduler
  scheduler:
    type: "reduce_on_plateau"  # Options: step, exponential, reduce_on_plateau, cosine
    patience: 5
    factor: 0.5
    min_lr: 1e-6
  
  # Early stopping
  early_stopping:
    enabled: true
    patience: 10
    min_delta: 0.001
  
  # Gradient clipping
  gradient_clipping: 1.0

# Loss Function Configuration
loss:
  # Type of loss function
  # Options: categorical_crossentropy, focal_loss, label_smoothing
  type: "categorical_crossentropy"
  
  # Label smoothing factor (0 = no smoothing)
  label_smoothing: 0.1

# Output Configuration
output:
  # Directory for trained models
  models_directory: "models"
  
  # Model format
  # Options: onnx, torchscript, savedmodel, h5
  format: "onnx"
  
  # Save frequency (save every N epochs)
  save_frequency: 10
  
  # Export during training
  export_on_save: true
  
  # Log directory for TensorBoard
  log_directory: "logs"

# Hardware Configuration
hardware:
  # Use GPU if available
  use_gpu: true
  
  # Mixed precision training (requires GPU with tensor cores)
  mixed_precision: false
  
  # Number of data loading workers
  num_workers: 4
  
  # Pin memory for faster GPU transfer
  pin_memory: true

# Logging Configuration
logging:
  # Log level
  # Options: debug, info, warning, error
  level: "info"
  
  # Log frequency (batches)
  log_frequency: 10
  
  # Generate plots for training history
  generate_plots: true

# Inference Configuration
inference:
  # Confidence threshold for predictions
  confidence_threshold: 0.5
  
  # Maximum detections per image
  max_detections: 10
  
  # Non-maximum suppression IoU threshold
  nms_iou_threshold: 0.45
